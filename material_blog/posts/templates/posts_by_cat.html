{% extends "base.html" %}
{% block content %}
    <div>this is posts in category {{ category.name }}:</div>
    {% if posts|length == 0 %}
        <div>there is no posts in this category yet!</div>
    {% else %}
        {% for post in posts %}
            <div class="row">
                <div class="col s6">
                    <div class="card hoverable">
                        <div class="card-image">
                            <img src="http://bpic.588ku.com/back_pic/03/72/26/3857b924a0286cc.jpg!/fh/300/quality/90/unsharp/true/compress/true">
{#                            <span class="card-title"><div><h5 class="truncate"><a href="{% url 'certain_post' post_id=post.id %}">{{ post.title }}</a></h5></div>#}
                            <span class="card-title"><div><h5 class="truncate"><a class="modal-trigger" href="#modal{{ post.id }}">{{ post.title }}</a></h5></div>
                                    <h6 class="truncate"><div><span>{{ post.author }}</span> <span>{{ post.date }}</span></div>
                                        <div><span>tags: {% for tag in post.tags.all %}
                                            <div class="chip small teal lighten-1">
                                                {{ tag.name }}
                                              </div>
                                        {% endfor %}</span></div></h6></span>
                            <button data-href="{% url 'like' %}" value="like" name="{{ post.id }}" class="like btn-floating halfway-fab waves-effect waves-light pull-right teal lighten-1" id="like_count{{ post.id }}">{{ post.likes.count }}</button>
                        </div>
                        <a class="modal-trigger" href="#modal{{ post.id }}">
                            <div class="card-content">
                                {{ post.text|safe|truncatechars:80 }}
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Modal Structure -->
                <div id="modal{{ post.id }}" class="modal">
                            <div class = "row valign-wrapper" style="background-color: black; height: 10%">
                                <div class="col m1 offset-m1">
                                    <a class="modal-action modal-close btn-floating waves-effect waves-light teal lighten-1"><i class="material-icons">arrow_back</i></a>
                                </div>
                            </div>
                    <div class="modal-content">
                        <div class="container">
                            <div class="row">
                                <h4>Modal Header</h4>
                            </div>
                            <div class="row">
                                <p>{{ post.text|safe }}</p>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        {% endfor %}
    {% endif %}

{% endblock content %}